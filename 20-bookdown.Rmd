# Publishing with Bookdown {#bookdown}
We built this open-access book with free-to-use, open-source tools, primarily [Bookdown](https://bookdown.org), [GitHub](http://github.com), and [Zotero](http://zotero.org). This chapter explains why and how we combined these tools and developed our authoring workflow, so that you can build your own book and share your knowledge about how to improve the process.

Why did we need a better workflow? Why not just author the book in a conventional word-processor? Our goal was to find an efficient workflow to compose one document that would generate multiple book products for different purposes, as shown in Figure \@ref(fig:0-workflow). We needed an interactive HMTL web edition for open-access online reading, a PDF print edition and/or Microsoft Word edition for editorial use, and a Markdown format for easy conversion into the publisher's platform. A conventional word-processor would not have achieved this goal, and would have resulted in creating entirely separate files for different editions. But with our unified workflow, whenever we edit the main document, we can easily generate all of the HTML, PDF, MS Word, and Markdown editions.

(ref:0-workflow) Simplified workflow to compose, compile, and publish in multiple formats with Bookdown. Images from [Daniel Hendricks](https://fileicons.org), [RStudio](https://github.com/rstudio/hex-stickers/), and [Zotero](https://www.zotero.org/support/brand).

```{r 0-workflow, fig.cap="(ref:0-workflow)"}
 knitr::include_graphics("images/20-bookdown/0-workflow.png")
```

## Overview {- #overview}
We based our solution around [Bookdown](https://bookdown.org), an open-source package for the [R code project](https://www.r-project.org/) created by Yihui Xie at RStudio. Although many people use R for statistical analysis, the free [RStudio desktop application](https://rstudio.com/) also supports several innovative publishing solutions. Here's an overview of our workflow:

- We composed the book manuscript in [R Markdown](https://rmarkdown.rstudio.com), the R-flavored version of the easy-to-write [Markdown syntax](https://en.wikipedia.org/wiki/Markdown). Each .Rmd file consisted of one chapter, with links to static images and interactive visualizations.
- We organized our sources using the free [Zotero bibliography manager](https://zotero.org) by the Roy Rosenzweig Center for History and New Media at George Mason University. Also, we installed the free [Better BibTeX](https://github.com/retorquere/zotero-better-bibtex) extension by Emiliano Heynes to make Zotero citation keys work smoothly with Bookdown.
- Behind the scenes, Bookdown knits and compiles the book using the [PanDoc](https://pandoc.org/) universal document converter and the [LaTeX](https://www.latex-project.org) document preparation software, without requiring authors to learn these complex formats.
- We uploaded all of our files to a free [GitHub](http://github.com) repository, and decided to make them public as we wrote the book, to develop our audience and receive feedback.
- We used the free [GitHub Pages](https://pages.github.com) feature to host the open-access HTML web edition of our book, as permitted by our agreement with the publisher. The open web edition is linked to a custom domain name (https://HandsOnDataViz.org) we purchased and set up through [Reclaim Hosting](http://reclaimhosting.com). We push all of our book's source files into the root level of the GitHub repo, and all of the Bookdown-generated editions (HTML and others) into the `docs` subfolder to enable easier web hosting.
- While we worked on the book manuscript, our developmental editor requested PDF or MS Word editions to mark up with feedback. Finally, when we were ready to submit the completed manuscript, we created a full-length Markdown file to upload into the publisher's [Atlas production platform](https://docs.atlas.oreilly.com/writing_in_asciidoc.html). However, this is a one-time file conversion, and edits we make to our Bookdown workflow will not appear in the publisher's platform, unless they request a new edition.

Screenshots of two variations of the basic workflow appear in Figure \@ref(fig:0-workflow2-desktop) and Figure \@ref(fig:0-workflow3-atom). The latter version displays how to compose the book using [Atom](http://atom.io), a different text editor than the one built into R Studio desktop. Learn more about [GitHub Desktop and Atom text editor in Chapter 11](github-desktop-atom.html).

(ref:0-workflow2-desktop) Workflow on a Mac desktop: Compose and build the book in RStudio with Bookdown (top left), manage sources and insert citation keys with Zotero + BetterBibTex (bottom left), and push the built book files to GitHub Pages with settings shown via web browser to share online (right).

```{r 0-workflow2-desktop, fig.cap="(ref:0-workflow2-desktop)"}
 knitr::include_graphics("images/20-bookdown/0-workflow2-desktop.png")
```

(ref:0-workflow3-atom) Optional variation on the workflow above: Use your preferred text editor, such as Atom, to compose Bookdown files in .Rmd format, as shown on the left side of the screen, and save all files on your local drive. Then use RStudio only to build the book products, as shown in the bottom-right corner of the screen, into the `docs` subfolder of your local drive. All changes saved with Atom editor to the local drive automatically appear in the RStudio pre-build files.  

```{r 0-workflow3-atom, fig.cap="(ref:0-workflow3-atom)"}
 knitr::include_graphics("images/bookdown/0-workflow3-atom.png")
```

Beware that our Bookdown workflow may not be ideal for novice computer users. Installation and setup requires several steps, as described in the next section. Before leaping into Bookdown or any software tool, read more about [Alternative Publishing Platforms](alternative.html) later in this chapter.

If you wish to explore Bookdown, see our detailed notes in subsequent sections of this chapter, and also explore these open-access Bookdown publications:

- Xie, Yihui. *Bookdown: Authoring Books and Technical Documents with R Markdown*. Chapman & Hall/CRC, 2018. https://bookdown.org/yihui/bookdown/.
- Xie, Yihui, J. J. Allaire, and Garrett Grolemund. *R Markdown: The Definitive Guide*. Chapman & Hall/CRC, 2020. https://bookdown.org/yihui/rmarkdown/.
- Xie, Yihui, Christophe Dervieux, and Emily Riederer. *R Markdown Cookbook*. Chapman & Hall/CRC, 2020. https://bookdown.org/yihui/rmarkdown-cookbook/.
