<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Leaflet Maps with Open Data API | Hands-On Data Visualization</title>
  <meta name="description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates like Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Leaflet Maps with Open Data API | Hands-On Data Visualization" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://handsondataviz.github.io/" />
  
  <meta property="og:description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates like Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  <meta name="github-repo" content="handsondataviz/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Leaflet Maps with Open Data API | Hands-On Data Visualization" />
  <meta name="twitter:site" content="@handsondataviz" />
  <meta name="twitter:description" content="Tell your story and show it with data, using free and easy-to-learn tools on the web. This introductory book teaches you how to design interactive charts and customized maps for your website, beginning with easy drag-and-drop tools, such as Google Sheets, Datawrapper, and Tableau Public. You will also gradually learn how to edit open-source code templates like Chart.js, Highcharts, and Leaflet on GitHub. Follow along with the step-by-step tutorials, real-world examples, and online resources. This book is ideal for students, non-profit organizations, small business owners, local governments, journalists, academics, or anyone who wants to tell their story and show the data. No coding experience is required." />
  

<meta name="author" content="Jack Dougherty" />
<meta name="author" content="Ilya Ilyankou" />


<meta name="date" content="2020-09-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="leaflet-maps-with-csv.html"/>
<link rel="next" href="transform.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5488840-29"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-5488840-29');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><strong>Hands-On Data Visualization</strong><br>by Jack Dougherty & Ilya Ilyankou</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="authors.html"><a href="authors.html"><i class="fa fa-check"></i>Authors &amp; Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="open-access.html"><a href="open-access.html"><i class="fa fa-check"></i>About this Open-Access Book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="sketch.html"><a href="sketch.html"><i class="fa fa-check"></i>Sketch Your Data Story</a></li>
<li class="chapter" data-level="" data-path="choose.html"><a href="choose.html"><i class="fa fa-check"></i>Choose Your Digital Tools</a></li>
<li class="chapter" data-level="" data-path="computer.html"><a href="computer.html"><i class="fa fa-check"></i>Follow Along on a Computer</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="spreadsheet.html"><a href="spreadsheet.html"><i class="fa fa-check"></i><b>2</b> Strengthen Your Spreadsheet Skills</a>
<ul>
<li class="chapter" data-level="" data-path="spreadsheet-tools.html"><a href="spreadsheet-tools.html"><i class="fa fa-check"></i>Select your Spreadsheet Tools</a></li>
<li class="chapter" data-level="" data-path="csv.html"><a href="csv.html"><i class="fa fa-check"></i>Download to CSV or ODS Format</a></li>
<li class="chapter" data-level="" data-path="copy.html"><a href="copy.html"><i class="fa fa-check"></i>Make a Copy of a Google Sheet</a></li>
<li class="chapter" data-level="" data-path="share.html"><a href="share.html"><i class="fa fa-check"></i>Share Your Google Sheets</a></li>
<li class="chapter" data-level="" data-path="upload.html"><a href="upload.html"><i class="fa fa-check"></i>Upload and Convert to Google Sheets</a></li>
<li class="chapter" data-level="" data-path="geocode.html"><a href="geocode.html"><i class="fa fa-check"></i>Geocode Addresses with Google Sheets Add-On</a></li>
<li class="chapter" data-level="" data-path="forms.html"><a href="forms.html"><i class="fa fa-check"></i>Collect Data with Google Forms</a></li>
<li class="chapter" data-level="" data-path="sort.html"><a href="sort.html"><i class="fa fa-check"></i>Sort and Filter Data</a></li>
<li class="chapter" data-level="" data-path="calculate.html"><a href="calculate.html"><i class="fa fa-check"></i>Calculate with Formulas</a></li>
<li class="chapter" data-level="" data-path="pivot.html"><a href="pivot.html"><i class="fa fa-check"></i>Summarize Data with Pivot Tables</a></li>
<li class="chapter" data-level="" data-path="vlookup.html"><a href="vlookup.html"><i class="fa fa-check"></i>Match Columns with VLOOKUP</a></li>
<li class="chapter" data-level="" data-path="database.html"><a href="database.html"><i class="fa fa-check"></i>Connect Sheets with a Relational Database</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="find.html"><a href="find.html"><i class="fa fa-check"></i><b>3</b> Find and Question Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="guiding.html"><a href="guiding.html"><i class="fa fa-check"></i>Guiding Questions for Your Search</a></li>
<li class="chapter" data-level="" data-path="public.html"><a href="public.html"><i class="fa fa-check"></i>Public and Private Data</a></li>
<li class="chapter" data-level="" data-path="mask-aggregate.html"><a href="mask-aggregate.html"><i class="fa fa-check"></i>Mask or Aggregate Sensitive Data</a></li>
<li class="chapter" data-level="" data-path="opendata.html"><a href="opendata.html"><i class="fa fa-check"></i>Open Data Repositories</a></li>
<li class="chapter" data-level="" data-path="source.html"><a href="source.html"><i class="fa fa-check"></i>Source Your Data</a></li>
<li class="chapter" data-level="" data-path="bad.html"><a href="bad.html"><i class="fa fa-check"></i>Recognize Bad Data</a></li>
<li class="chapter" data-level="" data-path="question.html"><a href="question.html"><i class="fa fa-check"></i>Question Your Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>4</b> Clean Up Messy Data</a>
<ul>
<li class="chapter" data-level="" data-path="find-and-replace.html"><a href="find-and-replace.html"><i class="fa fa-check"></i>Find and Replace with Blank</a></li>
<li class="chapter" data-level="" data-path="transpose.html"><a href="transpose.html"><i class="fa fa-check"></i>Transpose or Swap Rows and Columns</a></li>
<li class="chapter" data-level="" data-path="split-data.html"><a href="split-data.html"><i class="fa fa-check"></i>Split Data into Separate Columns</a></li>
<li class="chapter" data-level="" data-path="combine-data.html"><a href="combine-data.html"><i class="fa fa-check"></i>Combine Data into One Column</a></li>
<li class="chapter" data-level="" data-path="tabula.html"><a href="tabula.html"><i class="fa fa-check"></i>Extract Tables from PDFs with Tabula</a></li>
<li class="chapter" data-level="" data-path="open-refine.html"><a href="open-refine.html"><i class="fa fa-check"></i>Clean Data with OpenRefine</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chart.html"><a href="chart.html"><i class="fa fa-check"></i><b>5</b> Chart Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="chart-design.html"><a href="chart-design.html"><i class="fa fa-check"></i>Chart Design Principles</a></li>
<li class="chapter" data-level="" data-path="charts-google.html"><a href="charts-google.html"><i class="fa fa-check"></i>Google Sheets Charts</a></li>
<li class="chapter" data-level="" data-path="bar-column-google.html"><a href="bar-column-google.html"><i class="fa fa-check"></i>- Bar and Column Charts</a></li>
<li class="chapter" data-level="" data-path="pie-line-area-google.html"><a href="pie-line-area-google.html"><i class="fa fa-check"></i>- Pie, Line, and Area Charts</a></li>
<li class="chapter" data-level="" data-path="chart-datawrapper.html"><a href="chart-datawrapper.html"><i class="fa fa-check"></i>Datawrapper Charts</a></li>
<li class="chapter" data-level="" data-path="annotated-datawrapper.html"><a href="annotated-datawrapper.html"><i class="fa fa-check"></i>- Annotated Charts</a></li>
<li class="chapter" data-level="" data-path="range-datawrapper.html"><a href="range-datawrapper.html"><i class="fa fa-check"></i>- Range Charts</a></li>
<li class="chapter" data-level="" data-path="scatter-bubble-datawrapper.html"><a href="scatter-bubble-datawrapper.html"><i class="fa fa-check"></i>- Scatter and Bubble Charts</a></li>
<li class="chapter" data-level="" data-path="chart-tableau.html"><a href="chart-tableau.html"><i class="fa fa-check"></i>Tableau Public Charts</a></li>
<li class="chapter" data-level="" data-path="scatter-tableau.html"><a href="scatter-tableau.html"><i class="fa fa-check"></i>- Scatter Chart</a></li>
<li class="chapter" data-level="" data-path="filtered-line-tableau.html"><a href="filtered-line-tableau.html"><i class="fa fa-check"></i>- Filtered Line Chart</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>6</b> Map Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="map-design.html"><a href="map-design.html"><i class="fa fa-check"></i>Map Design Principles</a></li>
<li class="chapter" data-level="" data-path="mymaps.html"><a href="mymaps.html"><i class="fa fa-check"></i>Point Map with Google My Maps</a></li>
<li class="chapter" data-level="" data-path="map-with-datawrapper.html"><a href="map-with-datawrapper.html"><i class="fa fa-check"></i>Choropleth Map with Datawrapper</a></li>
<li class="chapter" data-level="" data-path="filtered-point-map-socrata.html"><a href="filtered-point-map-socrata.html"><i class="fa fa-check"></i>Filtered Point Map with Socrata</a></li>
<li class="chapter" data-level="" data-path="tableau-polygon.html"><a href="tableau-polygon.html"><i class="fa fa-check"></i>Polygon Map with Tableau Public</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="table.html"><a href="table.html"><i class="fa fa-check"></i><b>7</b> Table Your Data</a>
<ul>
<li class="chapter" data-level="" data-path="table-design.html"><a href="table-design.html"><i class="fa fa-check"></i>Table Design Principles</a></li>
<li class="chapter" data-level="" data-path="table-datawrapper.html"><a href="table-datawrapper.html"><i class="fa fa-check"></i>Datawrapper Table with Sparklines</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="embed.html"><a href="embed.html"><i class="fa fa-check"></i><b>8</b> Embed On Your Web</a>
<ul>
<li class="chapter" data-level="" data-path="github-pages.html"><a href="github-pages.html"><i class="fa fa-check"></i>Create a Simple Web Page with GitHub Pages</a></li>
<li class="chapter" data-level="" data-path="iframe-google-sheets.html"><a href="iframe-google-sheets.html"><i class="fa fa-check"></i>Copy an iframe code from a Google Sheets interactive chart</a></li>
<li class="chapter" data-level="" data-path="link-to-iframe.html"><a href="link-to-iframe.html"><i class="fa fa-check"></i>Convert a Weblink into an Iframe</a></li>
<li class="chapter" data-level="" data-path="iframe-github.html"><a href="iframe-github.html"><i class="fa fa-check"></i>Embed an Iframe in GitHub Pages</a></li>
<li class="chapter" data-level="" data-path="iframe-wordpress.html"><a href="iframe-wordpress.html"><i class="fa fa-check"></i>Embed an Iframe on WordPress.org</a></li>
<li class="chapter" data-level="" data-path="iframe-tableau.html"><a href="iframe-tableau.html"><i class="fa fa-check"></i>Embed Tableau Public on your Website</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>9</b> Edit and Host Code with GitHub</a>
<ul>
<li class="chapter" data-level="" data-path="copy-leaflet.html"><a href="copy-leaflet.html"><i class="fa fa-check"></i>Copy, Edit, and Host a Simple Leaflet Map Template</a></li>
<li class="chapter" data-level="" data-path="create-repo.html"><a href="create-repo.html"><i class="fa fa-check"></i>Create a New Repo and Upload Files on GitHub</a></li>
<li class="chapter" data-level="" data-path="github-desktop-atom.html"><a href="github-desktop-atom.html"><i class="fa fa-check"></i>GitHub Desktop and Atom Editor to Code Efficiently</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chartcode.html"><a href="chartcode.html"><i class="fa fa-check"></i><b>10</b> Chart.js and Highcharts Templates</a>
<ul>
<li class="chapter" data-level="" data-path="chartjs-bar-column.html"><a href="chartjs-bar-column.html"><i class="fa fa-check"></i>Bar or Column Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-error-bars.html"><a href="chartjs-error-bars.html"><i class="fa fa-check"></i>Error Bars with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-line.html"><a href="chartjs-line.html"><i class="fa fa-check"></i>Line Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="highcharts-annotated-line.html"><a href="highcharts-annotated-line.html"><i class="fa fa-check"></i>Annotated Line Chart with Highcharts</a></li>
<li class="chapter" data-level="" data-path="chartjs-scatter.html"><a href="chartjs-scatter.html"><i class="fa fa-check"></i>Scatter Chart with Chart.js</a></li>
<li class="chapter" data-level="" data-path="chartjs-bubble.html"><a href="chartjs-bubble.html"><i class="fa fa-check"></i>Bubble Chart with Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>11</b> Leaflet Map Templates</a>
<ul>
<li class="chapter" data-level="" data-path="leaflet-maps-with-google-sheets.html"><a href="leaflet-maps-with-google-sheets.html"><i class="fa fa-check"></i>Leaflet Maps with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="leaflet-storymaps-with-google-sheets.html"><a href="leaflet-storymaps-with-google-sheets.html"><i class="fa fa-check"></i>Leaflet Storymaps with Google Sheets</a></li>
<li class="chapter" data-level="" data-path="google-sheets-api-key.html"><a href="google-sheets-api-key.html"><i class="fa fa-check"></i>Get Your Google Sheets API Key</a></li>
<li class="chapter" data-level="" data-path="leaflet-maps-with-csv.html"><a href="leaflet-maps-with-csv.html"><i class="fa fa-check"></i>Leaflet Maps with CSV Data</a></li>
<li class="chapter" data-level="" data-path="leaflet-maps-with-api.html"><a href="leaflet-maps-with-api.html"><i class="fa fa-check"></i>Leaflet Maps with Open Data API</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>12</b> Transform Your Map Data</a>
<ul>
<li class="chapter" data-level="" data-path="bulk-geocode.html"><a href="bulk-geocode.html"><i class="fa fa-check"></i>Bulk Geocode with the US Census</a></li>
<li class="chapter" data-level="" data-path="pivot-point-to-polygon.html"><a href="pivot-point-to-polygon.html"><i class="fa fa-check"></i>Pivot Address-Level Point Data into Polygon Data</a></li>
<li class="chapter" data-level="" data-path="normalize.html"><a href="normalize.html"><i class="fa fa-check"></i>Normalize Data to Create Meaningful Choropleth Maps</a></li>
<li class="chapter" data-level="" data-path="convert-geojson.html"><a href="convert-geojson.html"><i class="fa fa-check"></i>Convert to GeoJSON format</a></li>
<li class="chapter" data-level="" data-path="geojsonio.html"><a href="geojsonio.html"><i class="fa fa-check"></i>GeoJson.io to Convert, Edit, and Create Map Data</a></li>
<li class="chapter" data-level="" data-path="mapshaper.html"><a href="mapshaper.html"><i class="fa fa-check"></i>Mapshaper to Convert, Edit, and Join Data</a></li>
<li class="chapter" data-level="" data-path="mapwarper.html"><a href="mapwarper.html"><i class="fa fa-check"></i>Georectify a Digitized Map with MapWarper</a></li>
<li class="chapter" data-level="" data-path="convert-kmz.html"><a href="convert-kmz.html"><i class="fa fa-check"></i>Convert a Compressed KMZ file to KML format</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="detect.html"><a href="detect.html"><i class="fa fa-check"></i><b>13</b> Detect Bias in Data Stories</a>
<ul>
<li class="chapter" data-level="" data-path="how-to-lie-with-charts.html"><a href="how-to-lie-with-charts.html"><i class="fa fa-check"></i>How to Lie with Charts</a></li>
<li class="chapter" data-level="" data-path="how-to-lie-with-maps.html"><a href="how-to-lie-with-maps.html"><i class="fa fa-check"></i>How to Lie with Maps</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="story.html"><a href="story.html"><i class="fa fa-check"></i><b>14</b> Tell Your Data Story</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="fix.html"><a href="fix.html"><i class="fa fa-check"></i><b>A</b> Fix Common Mistakes</a></li>
<li class="chapter" data-level="B" data-path="ct.html"><a href="ct.html"><i class="fa fa-check"></i><b>B</b> Find Connecticut Data</a></li>
<li class="chapter" data-level="C" data-path="peer.html"><a href="peer.html"><i class="fa fa-check"></i><b>C</b> Peer Review Samples</a>
<ul>
<li class="chapter" data-level="" data-path="peer-2-chart-1.html"><a href="peer-2-chart-1.html"><i class="fa fa-check"></i>Section 2 Chart 1 Peer Review Sample</a></li>
<li class="chapter" data-level="" data-path="peer-2-chart-1-notes.html"><a href="peer-2-chart-1-notes.html"><i class="fa fa-check"></i>Section 2 Chart 1 Peer Review Sample with Notes</a></li>
<li class="chapter" data-level="" data-path="peer-2-chart-2.html"><a href="peer-2-chart-2.html"><i class="fa fa-check"></i>Section 2 Chart 2 Peer Review Sample</a></li>
<li class="chapter" data-level="" data-path="peer-2-chart-2-notes.html"><a href="peer-2-chart-2-notes.html"><i class="fa fa-check"></i>Section 2 Chart 2 Peer Review Sample with Notes</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-1.html"><a href="peer-3-sample-1.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 1</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-1-notes.html"><a href="peer-3-sample-1-notes.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 1 with Notes</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-2.html"><a href="peer-3-sample-2.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 2</a></li>
<li class="chapter" data-level="" data-path="peer-3-sample-2-notes.html"><a href="peer-3-sample-2-notes.html"><i class="fa fa-check"></i>Section 3 Peer Review Sample 2 with Notes</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>D</b> Publishing with Bookdown</a>
<ul>
<li><a href="style-guide.html#style-guide">Style Guide for <em>Hands-On Data Visualization</em></a></li>
<li class="chapter" data-level="" data-path="images.html"><a href="images.html"><i class="fa fa-check"></i>Images</a></li>
<li class="chapter" data-level="" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i>Tables</a></li>
<li class="chapter" data-level="" data-path="notes.html"><a href="notes.html"><i class="fa fa-check"></i>Notes and Bibliography</a></li>
<li class="chapter" data-level="" data-path="modify-markdown.html"><a href="modify-markdown.html"><i class="fa fa-check"></i>Manually Modify Markdown Output</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li style="padding: 10px 15px; font-weight: bold;">Open access book-in-progress</li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></li>
<li><a href="https://bookdown.org" target="_blank">Built with Bookdown + RStudio</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hands-On Data Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="leaflet-maps-with-api" class="section level2 unnumbered" number="">
<h2>Leaflet Maps with Open Data API</h2>
<p>TODO:</p>
<ul>
<li>Note this new title and URL, which is more general than the older title and “leaflet-maps-with-socrata” URL</li>
<li>Blend in other section below this one</li>
<li>Update the example to pull map data from a continuously updated map, since the current example has not been updated since 2018</li>
<li>Decide if there’s anything useful to borrow from the other example repo, such as a non-Socrata endpoint?: <a href="https://github.com/HandsOnDataViz/leaflet-data-apis" class="uri">https://github.com/HandsOnDataViz/leaflet-data-apis</a></li>
<li>write intro to connect more directly to the <a href="opendata.html">Open Data section</a> in ch 3, and describe open data APIs in general, with Socrata API serving as a convenient example.</li>
</ul>
<iframe src="https://handsondataviz.github.io/leaflet-socrata/index.html" style="width: 100%; height: 450px; border: 0 none;">
</iframe>
<p>Source: <a href="https://data.hartford.gov/Public-Health/Current-Class-1-Class-4-Food-Establishments/xkvv-76v8">Current Class 1 - Class 4 Food Establishments</a>, City of Hartford</p>
<div id="why-pair-leaflet-maps-with-socrata-data" class="section level4 unnumbered" number="">
<h4>Why pair Leaflet maps with Socrata data?</h4>
<p>Leaflet, a friendly and flexible open-source code library for creating interactive web maps, plays nicely with Socrata, an open data platform used by several government agencies and organizations. Benefits of pairing Leaflet and Socrata:</p>
<ul>
<li><p>Although the Socrata data platform includes built-in visualization tools for anyone to create charts and maps, Leaflet gives you more control over your map design. Furthermore, Leaflet allows you to create maps that bring together data from both Socrata and non-Socrata sources.</p></li>
<li><p>Socrata datasets include an API (application program interface) endpoint, in the form of a web address. This endpoint enables other computers to easily access the most recent data online, instead of a static version that was manually downloaded.</p></li>
<li><p>Newer Socrata datasets that include locations (such as latitude and longitude coordinates) also provide endpoints in GeoJSON format. Since Leaflet maps easily process GeoJSON data, only a few lines of code are required.</p></li>
<li><p>However, Socrata GeoJSON endpoints do not currently support “real-time” data, such as up-to-the-minute locations of public transportation, etc. In these cases, you may need to access data through a provider other than Socrata, most likely in a different format, which may require more coding skills.</p></li>
</ul>
</div>
<div id="about-socrata-api-endpoints" class="section level4 unnumbered" number="">
<h4>About Socrata API endpoints</h4>
<p>Go to any Socrata open data platform, find a dataset, and click the API tab. As an example, you can use City of Hartford’s <a href="https://data.hartford.gov/Public-Safety/Police-Incidents-01012005-to-Current/889t-nwfu">Police Incidents dataset</a>.</p>
<div class="figure">
<img src="images/11-leaflet/data-hartford-api.png" alt="" />
<p class="caption">Police Incidents dataset on Hartford Open Data portal</p>
</div>
<p>Copy the API endpoint. The default version is JSON.</p>
<p>If you’re new to APIs, test the endpoint by pasting it into your browser address line. Ideally you would see a formatted JSON view (use Chrome or Firefox for better results).</p>
<div class="figure">
<img src="images/11-leaflet/data-hartford-api-json.png" alt="" />
<p class="caption">Formatted JSON example in Firefox</p>
</div>
<p>If your browser does not support JSON view, you will see the raw JSON stream only, like the one shown below.</p>
<div class="figure">
<img src="images/11-leaflet/data-hartford-api-json-not-formatted.png" alt="" />
<p class="caption">Unformatted JSON example in Firefox</p>
</div>
<p>Test if this Socrata endpoint supports GeoJSON format by changing the extention in the API dropdown menu from <code>JSON</code> to <code>GeoJSON</code>. GeoJSON format works best with Leaflet because the coding is simpler.</p>
<p>If your endpoint supports GeoJSON format, your browser will display a data stream similar to the one below.</p>
<div class="figure">
<img src="images/11-leaflet/data-hartford-api-geojson.png" alt="" />
<p class="caption">Formatted GeoJSON example in Firefox</p>
</div>
<p>If your Socrata endpoint only supports JSON format, but includes data columns with latitude and longitude, see other Leaflet examples further below.</p>
</div>
<div id="register-for-socrata-app-token" class="section level4 unnumbered" number="">
<h4>Register for Socrata App Token</h4>
<ul>
<li>Socrata requires developers to register for a free app token at <a href="https://opendata.socrata.com/signup" class="uri">https://opendata.socrata.com/signup</a></li>
</ul>
</div>
<div id="demonstration-maps" class="section level4 unnumbered" number="">
<h4>Demonstration Maps</h4>
</div>
<div id="geojson-endpoint-with-circle-markers-and-tooltips" class="section level4 unnumbered" number="">
<h4>GeoJSON endpoint with circle markers and tooltips</h4>
<ul>
<li><p>map <a href="https://handsondataviz.github.io/leaflet-socrata/index.html" class="uri">https://handsondataviz.github.io/leaflet-socrata/index.html</a></p></li>
<li><p>code <a href="https://github.com/handsondataviz/leaflet-socrata/index.html" class="uri">https://github.com/handsondataviz/leaflet-socrata/index.html</a></p></li>
<li><p>data <a href="https://data.hartford.gov/Public-Health/Current-Class-1-Class-4-Food-Establishments/xkvv-76v8" class="uri">https://data.hartford.gov/Public-Health/Current-Class-1-Class-4-Food-Establishments/xkvv-76v8</a></p></li>
<li><p>note: location data appears as latitude and longitude coordinates in the <code>geom</code> column</p></li>
<li><p>steps to create your own (MORE TODO HERE)</p>
<ul>
<li><p>select API button, copy endpoint, and change suffix from .json to .geojson</p></li>
<li><p>copy this Leaflet map template, which includes this key section of code:</p></li>
<li><p>paste and explain the code</p></li>
</ul></li>
</ul>
</div>
<div id="geojson-endpoint-with-simple-data-filter-default-marker-styling-and-pop-up-info" class="section level4 unnumbered" number="">
<h4>GeoJSON endpoint with simple data filter, default marker styling and pop-up info</h4>
<ul>
<li>map <a href="https://handsondataviz.github.io/leaflet-socrata/index-geojson-filter" class="uri">https://handsondataviz.github.io/leaflet-socrata/index-geojson-filter</a></li>
<li>code <a href="https://github.com/handsondataviz/leaflet-socrata/" class="uri">https://github.com/handsondataviz/leaflet-socrata/</a></li>
<li>data <a href="https://data.ct.gov/Environment-and-Natural-Resources/Agricultural-Commoditites-Grown-By-Farmer/y6p2-px98" class="uri">https://data.ct.gov/Environment-and-Natural-Resources/Agricultural-Commoditites-Grown-By-Farmer/y6p2-px98</a></li>
</ul>
</div>
<div id="multiple-socrata-datasets-with-leaflet-control-layers-legend" class="section level4 unnumbered" number="">
<h4>Multiple Socrata datasets with Leaflet control layers legend</h4>
<ul>
<li>map <a href="https://handsondataviz.github.io/leaflet-socrata/index-control-layers.html" class="uri">https://handsondataviz.github.io/leaflet-socrata/index-control-layers.html</a></li>
<li>code <a href="https://github.com/handsondataviz/leaflet-socrata/index-control-layers.html" class="uri">https://github.com/handsondataviz/leaflet-socrata/index-control-layers.html</a></li>
</ul>
</div>
<div id="older-json-only-endpoint-with-separate-columns-for-latitude-longitude" class="section level4 unnumbered" number="">
<h4>Older JSON-only endpoint, with separate columns for latitude, longitude</h4>
<ul>
<li>map <a href="https://handsondataviz.github.io/leaflet-socrata/index-json.html" class="uri">https://handsondataviz.github.io/leaflet-socrata/index-json.html</a></li>
<li>code <a href="https://github.com/handsondataviz/leaflet-socrata/index-json.html" class="uri">https://github.com/handsondataviz/leaflet-socrata/index-json.html</a></li>
<li>data <a href="https://opendata.demo.socrata.com/Government/Kentucky-Farmers-Market-Map/3bfj-rqn7" class="uri">https://opendata.demo.socrata.com/Government/Kentucky-Farmers-Market-Map/3bfj-rqn7</a></li>
</ul>
<p>Learn more:
- <a href="https://dev.socrata.com/" class="uri">https://dev.socrata.com/</a>
- <a href="https://github.com/chriswhong/simpleSodaLeaflet" class="uri">https://github.com/chriswhong/simpleSodaLeaflet</a></p>
</div>
<div id="thanks-to" class="section level4 unnumbered" number="">
<h4>Thanks to</h4>
<ul>
<li>Chris Metcalf <a href="https://github.com/chrismetcalf" class="uri">https://github.com/chrismetcalf</a></li>
<li>Tyler Klyeklamp <a href="https://data.ct.gov/" class="uri">https://data.ct.gov/</a></li>
</ul>
<p><strong>TODO: blend this section into the one above</strong></p>
<p>Pull Open Data into Leaflet Map with APIs {- #leaflet-maps-open-apis}
TODO: Decide whether to keep or not. Up to this point in the book, we’ve built charts and maps using static data that you have downloaded from other sites. But some open data repositories have APIs, or application program interfaces, which means the software that allows computers to communicate with one another. Below is a Leaflet Map template that uses APIs to pull in the most current data from three different open repository platforms: Socrata, Esri ArcGIS Online, and USGS.</p>
<p>Try it:
Explore the map below or <a href="https://handsondataviz.github.io/leaflet-data-apis">view full-screen version in a new tab</a></p>
<iframe src="https://handsondataviz.github.io/leaflet-data-apis/" width="90%" height="550">
</iframe>
</div>
<div id="how-it-works" class="section level4 unnumbered" number="">
<h4>How it works</h4>
<ol style="list-style-type: decimal">
<li><p>Go to the GitHub repo for the map above: <a href="https://github.com/handsondataviz/leaflet-data-apis" class="uri">https://github.com/handsondataviz/leaflet-data-apis</a></p></li>
<li><p>Explore the code to see how different APIs work. For example, see the first map overlay, which pulls Connecticut School Directory data from the CT Open Data repository on a Socrata open data platform: <a href="https://data.ct.gov/resource/v4tt-nt9n" class="uri">https://data.ct.gov/resource/v4tt-nt9n</a></p></li>
<li><p>Inside the open data repo, look for an API button and copy the endpoint.</p></li>
</ol>
<div class="figure">
<img src="images/11-leaflet/ct-open-data-api-endpoint.png" alt="" />
<p class="caption">Screenshot: Sample API endpoint in Socrata open data repo</p>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Paste the endpoint link into your browser, change the suffix from <code>.json</code> to <code>.geojson</code> and press return. In order to show the endpoint data as points on a map in this simple Leaflet template, the points must already be geocoded inside the open data repo, and the platform must support a GeoJSON endpoint. In your browser, one sign of success is a long stream of GeoJSON data like this:</li>
</ol>
<div class="figure">
<img src="images/11-leaflet/ct-open-data-geojson.png" alt="" />
<p class="caption">Screenshot: API endpoint with .geojson suffix in Chrome browser</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li>In this section of the Leaflet map template, the code includes a jQuery function <code>$.getJSON</code> to call the open data endpoint in GeoJSON format: <code>https://data.ct.gov/resource/v4tt-nt9n.geojson</code>. It also requires a Socrata app token, and you can get your own token for free at: <a href="https://dev.socrata.com/register" class="uri">https://dev.socrata.com/register</a>. Each geocoded school in the Socrata data repository is displayed as a blue circle, with data properties (such as: name) in a clickable pop-up.</li>
</ol>
<div class="sourceCode" id="cb26"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb26-1"><a href="leaflet-maps-with-api.html#cb26-1"></a><span class="co">// load open data from Socrata endpoint in GeoJSON format</span></span>
<span id="cb26-2"><a href="leaflet-maps-with-api.html#cb26-2"></a><span class="co">// with simple marker styling: blue circles</span></span>
<span id="cb26-3"><a href="leaflet-maps-with-api.html#cb26-3"></a><span class="co">// register your own Socrata app token at https://dev.socrata.com/register</span></span>
<span id="cb26-4"><a href="leaflet-maps-with-api.html#cb26-4"></a><span class="co">// Connecticut School Directory, CT Open Data, https://data.ct.gov/resource/v4tt-nt9n</span></span>
<span id="cb26-5"><a href="leaflet-maps-with-api.html#cb26-5"></a>$<span class="op">.</span><span class="fu">getJSON</span>(<span class="st">&quot;https://data.ct.gov/resource/v4tt-nt9n.geojson?&amp;$$app_token=QVVY3I72SVPbxBYlTM8fA7eet&quot;</span><span class="op">,</span> <span class="kw">function</span> (data){</span>
<span id="cb26-6"><a href="leaflet-maps-with-api.html#cb26-6"></a>  <span class="kw">var</span> geoJsonLayer <span class="op">=</span> L<span class="op">.</span><span class="fu">geoJson</span>(data<span class="op">,</span> {</span>
<span id="cb26-7"><a href="leaflet-maps-with-api.html#cb26-7"></a>    <span class="dt">pointToLayer</span><span class="op">:</span> <span class="kw">function</span>( feature<span class="op">,</span> latlng) {</span>
<span id="cb26-8"><a href="leaflet-maps-with-api.html#cb26-8"></a>      <span class="kw">var</span> circle <span class="op">=</span> L<span class="op">.</span><span class="fu">circleMarker</span>(latlng<span class="op">,</span> {</span>
<span id="cb26-9"><a href="leaflet-maps-with-api.html#cb26-9"></a>        <span class="dt">radius</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span></span>
<span id="cb26-10"><a href="leaflet-maps-with-api.html#cb26-10"></a>        <span class="dt">fillColor</span><span class="op">:</span> <span class="st">&quot;blue&quot;</span><span class="op">,</span></span>
<span id="cb26-11"><a href="leaflet-maps-with-api.html#cb26-11"></a>        <span class="dt">color</span><span class="op">:</span> <span class="st">&quot;blue&quot;</span><span class="op">,</span></span>
<span id="cb26-12"><a href="leaflet-maps-with-api.html#cb26-12"></a>        <span class="dt">weight</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb26-13"><a href="leaflet-maps-with-api.html#cb26-13"></a>        <span class="dt">opacity</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb26-14"><a href="leaflet-maps-with-api.html#cb26-14"></a>        <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.7</span></span>
<span id="cb26-15"><a href="leaflet-maps-with-api.html#cb26-15"></a>      })<span class="op">;</span></span>
<span id="cb26-16"><a href="leaflet-maps-with-api.html#cb26-16"></a>      circle<span class="op">.</span><span class="fu">bindPopup</span>(feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name</span> <span class="op">+</span> <span class="st">&#39;&lt;br&gt;&#39;</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">district_name</span>)<span class="op">;</span> <span class="co">// replace last term with property data labels to display from GeoJSON file</span></span>
<span id="cb26-17"><a href="leaflet-maps-with-api.html#cb26-17"></a>      <span class="cf">return</span> circle<span class="op">;</span></span>
<span id="cb26-18"><a href="leaflet-maps-with-api.html#cb26-18"></a>    }</span>
<span id="cb26-19"><a href="leaflet-maps-with-api.html#cb26-19"></a>  })<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span> <span class="co">// display by default</span></span>
<span id="cb26-20"><a href="leaflet-maps-with-api.html#cb26-20"></a>  controlLayers<span class="op">.</span><span class="fu">addOverlay</span>(geoJsonLayer<span class="op">,</span> <span class="st">&#39;Public Schools (CT Open Data-Socrata)&#39;</span>)<span class="op">;</span></span>
<span id="cb26-21"><a href="leaflet-maps-with-api.html#cb26-21"></a>})<span class="op">;</span></span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Fork a copy of this repo, play with the code, and try to insert GeoJSON endpoints from other open data repositories.</li>
</ol>
</div>
<div id="summary11" class="section level3 unnumbered" number="">
<h3>Summary</h3>
<p>TODO</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="leaflet-maps-with-csv.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="transform.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/handsondataviz/book/blob/master/11-leaflet.Rmd",
"text": null
},
"download": ["HandsOnDataViz.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

</body>

</html>
